<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Voodoo Shader Framework: Shaders</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="voodoo.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="voodoo-banner.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Voodoo Shader Framework
   &#160;<span id="projectnumber">framework-4.2-87-g30300eb</span>
   </div>
   <div id="projectbrief">Comprehensive shader support library</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Shaders </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Shaders are complete effects designed to be run on programmable graphics hardware.</p>
<p>They control almost all aspects of how a piece of geometry is displayed.</p>
<p>Each shader may have one or more techniques. A technique describes a full rendering process, and may have one or more passes. Each pass describes a particular way to render the given geometry, and may have multiple programs. Each program controls a particular part of the render process. In addition, shaders, techniques and passes contain some metadata used by the system to control how and where they are rendered. For any given piece of geometry, one technique is in use and the geometry is drawn once with each pass of that technique.</p>
<h2><a class="anchor" id="voodoo_graphics_shaders_stages"></a>
Program Stages</h2>
<p>Each program is designed to control a single specific stage of the render pipeline, typically handling how a data type is transformed (geometry, vertex, fragment/pixel). The two most common stages, vertex and fragment, work with existing data and transform it. Both have been supported since OpenGL 1.4 and DirectX 8 in some form, and almost all systems today support both. Given Voodoo's focus, it is safe to assume both stages are supported (the exact level of support may vary, however).</p>
<p>The fragment stage handles each pixel (or fragment) as it is rendered. The fragment program handles lighting in per-pixel lighting solutions, as well applying and blending texture stages, blending vertex colors, and any other operations that may vary for each pixel rendered.</p>
<p>The vertex stage handles each vertex, transforming them into view space and sometimes calculating lighting or surface normals.</p>
<p>The geometry stage has the opportunity to create vertexes if necessary and can build geometry dynamically. This is often used with a form of render-to-vertex buffer, to generate and store the geometry for later use. Geometry stages will often depend heavily on parameters passed into the effect. Geometry stages are supported on DirectX 10 or OpenGL 3.2 and better, usually.</p>
<p>Most recently, two tessellation control stages have been added (domain and hull). These are supported in DirectX 11 and equivalent, and so are not wide spread. They have some similarities to the geometry stage, but provide more control over the hardware tessellation process.</p>
<h2><a class="anchor" id="voodoo_graphics_shaders_system"></a>
Shader System</h2>
<p>In addition to the standard Cg compiler, Voodoo adds a few additional features to the shader system:</p>
<h3><a class="anchor" id="voodoo_graphics_shaders_system_parameters"></a>
Shader Parameters</h3>
<p>Voodoo provides a system to link effect-level parameters to application or system-level variables. This provides an easy way to provide data to shaders and is capable of linking many parameters from various effects to the same global parameter. Effect parameters may only be linked to global parameters. Global parameters are created by calling ICore::CreateParameter(), then any number of other parameters may be linked by calling IParameter::Attach() on the global parameter and providing the effect parameter, like so:</p>
<div class="fragment"><pre class="fragment"> IParameter * global = core-&gt;CreateParameter(<span class="stringliteral">&quot;time&quot;</span>, PT_Float);
 IParameter * effect = shader-&gt;GetParameter(<span class="stringliteral">&quot;time&quot;</span>);
 global-&gt;Attach(effect);
</pre></div><p>Whenever the global parameter is set to a new value, all attached parameters will also be updated. This mechanism is useful for things like system time, common matrices, random values or other data that changes each frame but not within the frame and does not vary between shaders.</p>
<h3><a class="anchor" id="voodoo_graphics_shaders_targets"></a>
Shader Targets</h3>
<p>Voodoo also provides a system to specify a target for each technique or pass. This provides an easy way to setup render-to-texture effects. Each shader technique and pass may have a target annotation, which gives the name of a texture. The results of the technique or pass, usually sent to the <code>lastshader</code> or <code>lastpass</code> texture, will instead go to the specified target. Targets may be specified like so:</p>
<div class="fragment"><pre class="fragment"> sampler2D diffuseSamp &lt; texture=<span class="stringliteral">&quot;buffer_diffuse&quot;</span>; &gt;;
 sampler2D specSamp &lt; texture=<span class="stringliteral">&quot;buffer_specular&quot;</span>; &gt;;

 technique dx9_high
 {
     pass diffuse &lt; <span class="keywordtype">string</span> target=<span class="stringliteral">&quot;:buffer_diffuse&quot;</span>; &gt;
     {
         ...
     }
     pass spec &lt; <span class="keywordtype">string</span> target=<span class="stringliteral">&quot;:buffer_specular&quot;</span>; &gt;
     {
         ...
     }
     pass combine
     {
         <span class="keywordflow">return</span> ( diffuseSamp + specSamp );
     }
 }
</pre></div><p>This allows pass and technique output to be stored and later used, by other passes from the same effect or even by other effects. If no target is specified in the technique or pass annotations, the shader linker uses the texture currently bound to the core's stage textures. These may be set using ICore::SetStageTexture(). </p>
</div></div>


<hr class="footer"/><address class="footer"><small>
Generated on Sat Nov 26 2011 02:22:05 for Voodoo Shader Framework by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
