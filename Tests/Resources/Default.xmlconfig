<!-- 
    Generic Voodoo config, set up for rev170 or better. 
    Includes Gem and Frost settings, set up for target detection. 
-->
<VoodooConfig>
    <!-- 
         Global variables. These are loaded first and may be used in
         module names and other settings (allows for easy swapping). 
    -->
    <Variables>
        <!-- 
             Target variables. $(adapter) will take on the value of
             the var whose name matches $(target). Variable names are
             case insensitive, so these match all files with the name.
        -->
        <Variable name="testcore.exe">$(adapter_class:TestCore)</Variable>
        <Variable name="morrowind.exe">$(adapter_class:Gem)</Variable>
        <Variable name="nwmain.exe">$(adapter_class:Frost)</Variable>

        <!-- Null adapter class for all other targets. -->
        <Variable name="adapter_class">Null</Variable>

        <Variable name="adapter">$(?$(target))$(adapter_class)</Variable>
    </Variables>

    <Plugins>
        <!-- Plugins to be loaded. May be given as a path or single file. -->
        <Path filter="Voodoo_(Filesystem|Hook|Logger).dll">$(globalroot)</Path>
    </Plugins>

    <Core>
        <!-- Core classes. These are created during startup. -->
        <Class>
            <Logger>XmlLogger</Logger>
            <HookManager>EHHookManager</HookManager>
            <FileSystem>WFileSystem</FileSystem>
            <Adapter>$(adapter)_Adapter</Adapter>
        </Class>

        <!-- Log filename. -->  
        <LogFile>$(runroot)\Voodoo_$(adapter)</LogFile> 
        <LogLevel>FF</LogLevel>
    </Core>

    <!-- Settings for the WFileSystem class. -->
    <WFileSystem>
        <!-- Use search paths below for all files. (not implemented) -->
        <RewritePaths enabled="false" /> 

        <SearchPaths>
            <Path>$(globalroot)\resources\common\</Path>
            <Path>$(globalroot)\resources\$(adapter)</Path>
            <Path>$(localroot)\resources\</Path>
            <Path>$(runroot)\resources\</Path>
            <Path>$(allgames)\VoodooShader\resources\common\</Path>
            <Path>$(mygames)\VoodooShader\resources\common\</Path>
            <Path>$(allgames)\VoodooShader\resources\$(adapter)\</Path>
            <Path>$(mygames)\VoodooShader\resources\$(adapter)\</Path>
        </SearchPaths>
    </WFileSystem>

    <!-- Settings for Frost_Adapter class. -->
    <Frost_Adapter>
        <PostShaders>
            <Shader>test.cgfx</Shader>
            <Shader>voodoologo.cgfx</Shader>
        </PostShaders>
    </Frost_Adapter>

    <!-- Settings for Gem_Adapter class. -->
    <Gem_Adapter>
        <TrueHDR enabled="false" />
        <PostShaders>
            <Shader>test.cgfx</Shader>
            <Shader>voodoologo.cgfx</Shader>
        </PostShaders>
    </Gem_Adapter>

</VoodooConfig>
